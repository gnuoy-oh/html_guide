# 검색엔진최적화(Search Engine Optimization, SEO)

- 홈페이지 혹은 콘텐츠를 검색 결과의 상단에 위치시키는 작업을 말한다.

    - '트래픽'이라는 것은 매출을 일으킬 수 잇는 하나의 기회이기 때문에, 트래픽 증감에 따라 회사의 매출, 수익 규모가 크게 영향을 받게 된다.

- 검색 결과 페이지에 홈페이지, 콘텐츠를 노출시키는 방법은 광고와 SEO 두 가지가 있다.  

    - 광고는 비용이 들고, Ad라고 표시가 되다보니, 사람들의 신뢰성이 떨어진다.
    
    - 그러므로 자연스럽게 올라오는 검색 결과를 선호하므로, SEO가 중요하다.
    
- 검색 엔진이 좋아하는 웹사이트의 조건을 갖추는 것
    
## 방법

###  웹 크롤링?웹 스크르랩핑? 

    - 컴퓨터 소프트웨어 기술로 웹 사이트들에서 원하는 정보를 추출하는 것을 의미한다. 
    
    - 크롤링 하는 소프트웨어는 크롤러 라고 부른다. 이는 조직적, 자동화된 방법으로 W3C을 탐색하는 컴퓨터 프로그램이다.
    
    - 다른 용어로는 ant, 자동 인덱서, 봇(bots) 웜(worm), 웹 스파이더, 웹 로못 등이 있다.0

1. 보안 프로토콜(HTTPS)

    - 구글은 HTTP 일반 프로토콜을 사용하는 웹사이트보다 더 높은 점수를 부여할 것이라고 발표했다.
    
2. Robots.txt(로봇 배제 표준 파일) & sitemap.xml(사이트 맵)

    - robots.txt는 웹사이트에 대한 검색엔진 로봇들의 접근을 조절해주고 제어해주고 로봇들에게 웹사이트의 맵이 어디 있는지 알려주는 역할을 한다. 
    - 만약 특정 페이지가 검색엔진에 노출되지 않기를 바란다면 robots.txt 파일을 설정하여, 이를 제어할 수 있다. 
    - robots.txt는 html 아닌 일반 텍스트파일로 작성하며, 사이트의 루트 디렉토리에 위치해야 한다. 
    
    - sitemap.xml 은 웹사이트 내 모든 페이지의 목록을 나열한 파일로, 책의 목차와 같은 역할을 한다. 사이트 맵을 제출하면 일반적인 크롤링 과정에서 쉽게 발견되지 않는 웨페이지도 문제없이 크롤링이 되고 색인될 수 있게 해준다.
    
3. Title & Meta description 태그의 사용 (검색엔진최적화 메타태그, 기타 태그)

    - title tag : 웹 페이지의 제목
    
    - meta description :  웹페이지의 중심 내용을 요약하여 설명해주는 역할
    
    - 이 둘은 사용자의 클릭율에 큰 영향을 미치기 때문에, 클릭율을 높이고 싶다면 사람들이 관심있어 할만한 키워드, 문구를 통해 태그 최적화, 구글 SEO 작업을 해야한다.
    
4. 소셜 검색엔진최적화 메타태그 

    - 웹사이트의 콘텐츠를 부지런히 소셜 미디이어에서 공유하고, 퍼블리싱 작업도 SEO에서 큰 부분을 차지하게 된다.
    
    - 오픈그래프 태그(Open Graph:og)는 페이스북과 같은 소셜 미디어에서 웹페이지 URL이 공유될 때, 웹 페이지의 주요 정보 (제목, 이미지, 설명)가 표기되는 방식을 관리해주는 역할을 한다.
    
5. 이미지 태그 및 최적화

    - 이미지와 관련된 태그 중, 검색엔진최적화에 있어서 가장 중요한 것은 이미지 ALT 태그이다.
    
    - alt 태그가 잘 설정되어 있는 이미지의 경우, 구글 이미지 검색에서 높은 검색순위를 차지할 수 있고 스크린 리더를 사용하는 사람들이 웹페이지를 이해하는데 도움이 된다.
    
6. 모바일 최적화

    - 모바일 최적화는 매우 중요한 구글 SEO 랭킹 요소가 되었고, 우리가 아는 글로벌 회사들은 대부분 모바일 친화적인 웹사이트를 구축해 운영하고 있다.
    
    - https://search.google.com/test/mobile-friendly
    
    - 웹 사이트를 아예 반응형으로 제작하거나, 모바일 용 웹사이트를 따로 운영하는 방법이 있다.
    
    - 반응형 웹사이트를 만드는 것이 가장 좋은 SEO 방법이다.
    
7. 대표 주소 설정 (https / http / with www / without www)

    - SEO의 핵심은 내 도메인, URL 의 최적화 점수를 높이는 것이다.
    
    - 만약 하나의 페이지를 접속하는 방법이 여러가지가 있다면 하나의 대표 주소를 정하고 나머지에 대해서는 리 다이렉트를 설정하는 것이 좋다.
    
8. 키워드 및 콘텐츠 최적화

    - 구글은 독특하며, 정보가 풍부하게 담긴 콘첸츠를 좋아한다.
    
    - 그러므로 내용이 좋다고 다른 사이트에 있는 글을 그대로 복붙하거나, 뜨는 검색어 순위를 보고 두서없이 작성하면 구글에 의해 제재를 받을 수 도 있다.
    
    - 따라서 콘텐츠를 기획할 때, 나의 웹사이트가 어떤 분야, 주제와 관련이 있어야 할 지에 대해 생각해보고 그 주제와 관련된 키워드를 찾은 후 콘텐츠를 작성하는 편이 좋다.
    
    - https://www.twinword.com/ideas/ : 서치 툴에 키워드를 입력하면 그 키워드와 관련된 수백가지 연관 키워드를 받아볼 수 있다.

## 웹 사이트 최적화 
      
### 1. HTTP 요청 줄이기

### 2. CSS sprite 사용

- 웹 페이지를 구현하면서 많은 이미지들이 사용된다. 많이 사용하면 할수록 HTTP 요청 또한 많아지게 된다. 이미지를 많이 사용하면서도 HTTP 요청을 최소화 하기 위한 방법으로 CSS 스프라이트 기법이 있다.

- 여러개의 이미지를 하나로 모아 이미지 파일의 갯수를 줄이는 방법이다. 여러 이미지를 다운 받아야 했던 것을 하나만 다운받게 됨으로써 요청 횟수도 줄고, 응답 시간도 줄어들게 된다.

### CDN(content delivery network)의 사용

- 사용자 응답시간의 대부분이 구성요소를 다운로드 받는에 사용된다.

- CDN은 사용자에게 보다 효율적으로 컨텐츠를 제공하기 위해 여러 지역에 걸쳐 분산된 웹서버의 집합체로, 사용가자 요청을 했을 때 고객의 네트워크에서 가장 가까운 서버를 측정하여 선택하기 때문에 가장 빠른 응답시간의 서버가 선택된다.

- CDN 서비스는 비용이 발생하지만, 웹사이트를 급격히 향상시킬 수 있는 쉬운 방법 중 하나이다.

### 4. 캐시 만료일 설정

- 캐시 만료일 설정하는 이유는 웹페이지의 구성 요소인 HTML, CSS, JavaScript, 이미지 등의 파일 등을 사용자 컴퓨터의 캐시에 저장해두고 재사용 하기 위해서이다.

### 5.  Gzip

- 압축을 통해서 파일 크기를 줄여 응답시간을 줄일 수 있다. 

- Gzip은 파일의 압축에 사용되는 응용 소프트웨어 이며 대부분의 브라우저에서 지원되고 있기 때문에 가장 대중적이며 효과적인 압축 방법이다.

- Gzip으로 파일을 압축해 전송하게 되면, 평균 70% 정도 파일 크기가 작아지는 효과를 볼 수 있다.

- 압축 전송 흐름 및 확인
    
    1. 클라이언트에서 헤더 정보로 인코딩 여부를 물어본다.
    
    2. 서버에서 헤더 정보로 인코딩 여부를 알려준다. 인코딩된 요소라면 다음과 같이 응답이 온다.
    
    3. 클라이언트에서 인코딩된 요소를 받음과 동시에 압축을 해제한다.
    이때 추가적인 CPU 연산 비용이 들어간다. 여기서 발생하는 CPU 연산 비용도 무시할 수 없기 때문에 압축할 파일과 크기를 잘 설정해야 한다.
    보통 이미지 파일은 이미 압축돼 있기 때문에 압축하지 않고, 스타일시트 파일과 자바스크립트 파일을 압축한다.    
    그리고 파일 크기가 작으면 속도 개선 효과보다 CPU 연산 비용이 더 들기 때문에 파일 크기가 일정한 크기 이상인 경우에만 압축하는 것이 좋다.
    스티브 사우더스의 "웹사이트 최적화 기법"에 의하면 파일 크기가 1~2KB 이상일 때 압축할 것을 권장한다.
       
### 6. 상단에 스타일시트 넣기

- 문서의 HEAD에 스타일 시트를 입력하면, 순차적으로 페이지를 로딩하도록 만들어 주어 로딩 속도를 향상 시킨다. 

- 브라우저는 점진적으로 페이지를 그리는데, 렌더 트리를 생성할 때 스타일 시트가 반드시 필요하다. 

- 그리고 파.폭이나 익스같은 경우 스타일 시트 파일을 모두 다운로드 할 때 까지 화면을 렌더링 하지 않는다.

- 때문에 스타일시트 파일은 페이지의 가장 위 쪽에 위치하는 것이 좋다.

    - 브라우저가 마크업을 파싱해서 화면에 보여주는 기본적 흐름

    ```
    1. HTML 파싱과 DOM 트리 구성
                    
    사용자가 페이지를 요청하면 네트워크를 통해 마크업을 받아옵니다.
    그러고 나서 마크업 문자열을 토큰 형태로 잘라서(Tokenizer) 트리를 구축하고 파싱 작업을 시작합니다. 그런 다음 DOM 트리를 생성 합니다.
    
    2. 렌더 트리 구성(DOM + 스타일 규칙)
    
    DOM 트리를 생성한 다음 바로 화면을 그리지는 않습니다. 스타일시트의 정보를 적용해야 하기 때문입니다.
    DOM 트리 정보와 스타일시트의 스타일 규칙을 결합해 렌더 트리(Render Tree) 를 만듭니다.
    display:none 속성처럼 DOM 트리에는 있지만 화면에 보이면 안되는 요소를 걸러낸 결과가 렌더 트리입니다.
    
    3. 렌더 트리의 배치
    
    최종적으로 스타일 규칙에 따라 각 요소를 화면의 어디에 배치할지 좌표를 설정 합니다.
    
    4. 렌더 트리 그리기
    
    요소의 좌표가 설정되면 브라우저에 순차적으로 화면을 그립니다. 이때 사용자는 화면을 조금씩 보게 됩니다.
    ```

### 7. 하단에 스크립트를 넣기

- 스크립트를 하단에 놓아야 하는 가장 큰 이유는, 파일을 다운로드해서 실행하기 전까지 브라우저가 DOM 파싱도 중지하고 아무것도 렌더링 하지 않기 때문이다.

- 이로 인해 이미 서버 통신을 완료하고 필요한 구성 요소를 모두 브라우저에 가져왔음에도, 자바스크립트를 수행하느다 렌더링을 멈추게 된다.

- 이 때 사용자에게는 마치 화면이 멈춘 것처럼 보여 체감 속도가 느려지게 된다.

### 8. 자바스크립트 / CSS를 외부로 분리하기

- 위 6 / 7 처럼 HTML 문서 내에 배치하는 것보다 link / script 태그로 불러오는 방식을 사용하는 것이 응답시간을 줄여준다.
     
### 9.  자바스크립트 / CSS 통합하기
 
- 외부로 분리한 파일들을 최대한 통합하여 파일 갯수를 줄이는 것 또한 중요하다.
    
### 10. 자바스크립트 / CSS Minify (축소)

- 불필요한 선언을 하지 않아야 파일의 용량을 줄이고 렌더링 속도를 빠르게 할 수 있다. 

- white space를 제거

-  JSMin 과 Compressor를 사용해서 축소를 할 수 있다.

### 11. DNS(Domain Name System) 조회 줄이기

- 전화 번호부가 사람들의 이름을 전화번호로 매핑하는 것처럼, 호스트 이름을 IP 주소에 매핑을 한다.

### 12. 중복 script 제거하기

### 13. 리다이렉트 피하기

- 사용자를 한 url에서 다른 url로 다시 보내는 것을 이야기 한다. 

- html 문서 모두 요청하기도 하며, 페이지 안에서 구성 요소를 요청할 때도 사용된다. 

- 리다이렉트가 완료되고 HTML 문서가 다운로드 될때가지 브라우저 화면에 아무것도 보이지 않는다. 때문에 페이지를 느리게하고 지연시킨다.

### 14. ETag(entity tags) 헤더 설정하기 

- 브라우저 캐시에 있는 컴포넌트가 원본 서버에 있는 컴포넌트와 일치하는지 여부를 확인하기 위해 웹서버와 브라우저가 사용하는 매커니즘
    
### 15. 초기 렌더링 시 Ajax 최소화 하기  

- 체감 속도를 높이려면 되도록 초기 렌더링시에는 AJAX 요청을 최소화 한다.
    
- 동적인 웬 사이트에서 화면을 그리는 단계
    
    1. 사용자가 페이지를 요청한다.
    
    2. 서버에서 보낸 마크업을 다운로드해 렌더링을 시작한다. 이때 마크업은 화면을 구성하는 레이아웃만 있고 실제로 보여 줄 데이터는 
    나중에 AJAX 요청을 통해 받은 다음 그릴 것이다.
    
    3. 자바스크립트 다운로드와 렌더링이 끝난 후 onload 이벤트가 발생한다.
    
    4. onload 이벤트가 발생한 다음에야 AJAX 통신을 실행하고 데이터를 화면에 그린다.
    
    5. 화면을 완성한다.
                
### 16. 쿠키 사이즈 줄이기

- HTTP 쿠키들은 인증 및 개인화와 같은 다양한 이유로 사용된다. 쿠키들에 대한 정보는 웹 서버와 웹 브라우저 사이의 HTTP headers에서 교환된다.

- 쿠키들의 크기를 가능한 작게 유지하는 것은 사용자의 응답시간에 미치는 영향을 최소화 하기 때문에 중요하다.
    
### 17. iframe 갯수를 최소화 하기

- 많은 iframe은 많은 이미지, 스크립트를 사용하는 경우와 같이 성능을 떨어뜨리기 때문에 갯수를 최소화해서 사용하는 것이 좋다.
    
### 18. DOM 요소의 수를 줄이기

- 복잡한 페이지는 더 많은 바이트를 다운로드 하는 것을 의미하고, 또한 자바스크립트에서 느린 DOM 접근을 의미한다. 

- 좋은 마크업을 하기 위해서도, 불필요한 요소들을 제거하며 마크업을 하는 것이 중요하다.
    
### 19. DOM 접근을 최소화 하기

- 자바스크립트에서 dom 객체는 자바스크립트의 주요 성능 저하 요인 중 하나이다.

- 따라서 자바스크립트 성능을 최소화하기 위해서는 DOM 객체 접근을 최소화 하도록 코드를 작성한다.
     
### 20. 이벤트 핸들러 설정하기
 
- 페이지 안에서 너무 자주 실행되는 DOM tree의 서로 다른 요소들에 붙어진 많은 이벤트 핸들러 때문에 반응 속도가 느려진다.

- 만약 한개의 div 안에 10개의 버튼을 사용한다면 각 버튼마다 이벤트 핸들러를 설정하지 않고, 버튼들을 감싸고 있는 div에 이벤트 핸들러를 사용하는 것이 더 효과적이다.
    
### 21. NO 404s 없애기

- 404 not found 는 HTTP 요청을 하고 페이지가 없다는 응답을 받게 되는 불필요한 요청으로, 사용자 경험을 느리게 만든다.
    
### 22. CSS - filter 사용 자제하기 

- filter의 문제점은 이미지가 다운로드 되고 있는 동안, 렌더링을 차단하고 브라우저를 멈추게 만든다.
    
### 23. CSS - expressiont 사용 자제하기

### 24. HTTP에서 이미지 크기를 줄이지 않기!!

- html 안에서 img width="300" height="200" src="sample.png" alt="sample" / 와 같이 이미지 사이즈를 변경하지 않는 것이 좋다.

- 원하는 사이즈로 커팅된 이미지를 넣어 사용하는 것이 최적화에 좋다.
    
### 25. favicon.ico 파일은 작고 캐시가 가능하게 제작하기

- 파비콘은 서버의 루트(root)에 머무는 이미지어서, 이 이미지는 다운로드 순서를 방해한다.

- 1k 하로 작게 제작한다.

- 변경 설정 후에는 이름 변경이 불가능 하므로, 원하는 시점의 expires header를 설정해준다.
    
### 26. 이미지 최적화
    
- 이미지 스프라이트 기법도 중요하지만, 모든 이미지를 다 적용할 수 없으므로 각각의 이미지들은 최적화 해주는 것이 중요하다.

- 이미지를 최적화 하기 전, 꼭 이미지를 사용해야 하는지에 대한 여부부터 생각해보고, 이미지를 대신할 CSS와 웹 글꼴들을 활용하여 대체할 수 있다면 대체하여 구현하는 것이 최적화 방법이다.

    1. 벡터 형식 선호 : 벡터 이미지는 해상도 및 배율에 독립적이므로, 여러 기기 및 고해상도 환경에 적합하다.
    
    2. SVG 자산 최소화 및 압축
    
    3. 최적의 래스터 이미지 형식 선택 : 기능적인 요구사항을 확인하고 각각 특정 자산에 맞는 형식을 선택한다.
    
    4. 최적화된 품질 설정 실험 
    
    5. 불필요한 이미지 메타데이터 제거 : 많은 래스터 이미지에는 위치정보, 카메라 정보 등 자산과 관련하여 불필요한 메타 데이터가 들어있다. 적합한 도구를 사용하여 이러한 메타 데이터를 삭제한다.
    
    6. 배율이 조정된 이미지 제공 : 서버의 이미지 크기를 조정하고 '표시' 크기를 이미지의 '실제' 크기와 최대한 가깝게 한다.
    
    7. 자동화 : 자동화된 도구 및 인프라에 투자하여 모든 이미지 자산이 항상 최적화 되도록 한다.  
        
### 27. 25k 이하의 구성 요소들을 유지하기

- 아이폰에서는 25k 보다 큰 구성요소를 캐시하지 않는 이유 때문이다.
    
### 28. 다중 문서에 구성 요소들을 묶는다.

### 29. @import 보다 link를 선택하는 것이 좋다.

- 점진적 렌더링을 하기 위해, CSS가 페이지의 상단에 와야 한다는 내용을 봤던 거처럼, ie에서 @import는 태그를 페이지의 하단에 사용하는 것과 같으므로, 최적의 사용 방법이 아니다.
    
### 30. 빈 이미지 src 없애기

## 캐시와 쿠키

### 캐시(cache)

- 프로그램이 수행될 때 나타나는 지역성을 이용하여 메모리나 디스크에서 사용되었던 내용을 특별히 빠르게 접근할 수 있는 곳에 보관하고 관리함으로써 이 내용을 다시 필요로할 때 보다 빠르게 참조하도록 하는 것이다.
    
- 쉽게 풀어서 설명하면 사용되었던 데이터는 다시 사용되어 질 가능성이 높다는 개념을 이용한 것이다. 이를 통해서 다시 사용될 확률이 높은 아이들을 좀 더 빠르게 접근 가능한 저장소를 사용한다는 개념이다.
    
### 쿠키(cookie)

- 쿠키는 유저들의 효율적이고 안전한 웹 사용을 보장하기 위하여 웹사이트에 널리 사용되고 있다.

- 쿠키는 웹사이트 접속시 접속자의 개인장치에 다운로드 되고 브라우저에 저장되는 작은 텍스트 파일로, 웹사이트는 쿠키를 통해 접속자의 장치를 인식하고, 접속자의 설정과 과거 이용내역에 대한 일부 데이터를 저장한다.
    
- 일반적으로 쿠키에는 만료일이 있다.

    1. 브라우저를 닫는 경우 자동으로 삭제되는 쿠키(세션 쿠키)

    2. 수동으로 삭제되기 전까지 남아있는 등 더 오랜기간 동안 컴퓨터에 저장되는 쿠키(지속적 쿠키)   
  
 

